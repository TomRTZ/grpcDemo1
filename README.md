# grpcDemo1

This repository is a simple Grpc demo. It just shows how to make simple Grpc programs in Python and Java.

To play with it, just follow the simple instructions:

1. Java part

1.1 Set up the environment

First of all install a JDK. I believe you have surely installed it. Update it to version 7 or higher if it isn't.

Since the program relies on the Grpc java libraries and involve Protocol Buffer compiling, it is recommended that
we build it as a Maven project. Actually, this demo was written in Eclipse as a Maven project. Therefore, you can 
choose to download the pom.xml file and import it as a Maven project, then the dependencies will make the IDE download
the necessary libraries automaticly. 

After that, put the source files in the src directory into the project's src directory.

1.2 Generate some source files

Now run the project as Maven Install. A Protocol Buffer compiler and a Grpc ProtoBuff Java Plugin will be downloaded
automaticly and some .proto files and Java source files will be generated by the compiler. These generated files are 
put in the target directory. We can add the "\WorkSpace\grpcDemo1\target\generated-sources\protobuf\java" and 
"\WorkSpace\grpcDemo1\target\generated-sources\protobuf\grpc-java" as source directories.

Somtimes in some IDEs the building will be failure. Try again. Sometimes after a few tries it works -_-

There may be errors about overriding supper classes' methods in CompaniesGrpc.java. Just comment out the @overload
anotations before those methods having errors. Don't forget to save.

After all the generatd files and dependency libraries are ready, the server or the client can be run.

1.3 Run the server

Run the CompaniesServer.java as Java application. Some outputs will be displayed in the console showing the server 
has launched and is listenning in a port.

1.4 Run the client

Run the CompaniesClient.java as Java application. It will send some data to the network via the same port and wait 
for responds. If the server sends back some data, the client will process them. All these are displayed in console.


2. Python part

2.1 Set up the environment

First of all install Python. I believe you surely have Python on your computer.

Then ensure you have pip version 8 or higher. "$ python -m pip install --upgrade pip" can be used to upgrade pip.

Then install Grpc libraries. Execute "$ python -m pip install grpcio", then "$ python -m pip install grpcio-tools".
The libraries will be downloaded and put in the Python resource directories.

All the commands above can be done in a command line window.

Then put the files in the Python directory in somewhere you like.

2.2 Generate some source files

In command line, go to the directory containing those files. 
Execute "$ python -m grpc_tools.protoc -I./protos --python_out=. --grpc_python_out=. ./companies.proto"

Two Python source files will be generated: companies_pb2.py and companies_pb2_grpc.py
In fact, these two files are already in the repository. If the companies.proto file is modified, you can regenerate
those two .py files using the above command.

After all the generatd files and Grpc libraries are ready, the server or the client can be run.

2.3 Run the server

In command line, run "$ python companies_server.py"
Some outputs will be displayed in the console showing the server has launched and is listenning in a port.

2.4 Run the client

In command line, run "$ python companies_client.py"
It will send some data to the network via the same port and wait for responds. If the server sends back some data, 
the client will process them and displayed the process.


3. Try cross transmittion

The functionality of Grpc and Protocol Buffer is exchanging data between different platforms. So just try launching 
a Java sever and running a Python client to send request. Or try launching a Python sever and running a Java client.

Although the structure of the programs in those two languages are different, the communication between them works.

Of course, the server and client in the same language also work.


4. Other comments

There are some bugs in this demo code. After debugging, the codes will be updated.

For more information, please refer to "https://grpc.io/" and "https://github.com/grpc"



